<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        html, body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; width: 100vw; height: 100vh; overflow: hidden; user-select: none; }

        /* === SPLASH SCREEN === */
        #splash { position: fixed; inset: 0; background: #f1c40f; z-index: 9999; display: flex; justify-content: center; align-items: center; pointer-events: none; animation: forceHide 0.5s forwards 4.5s; }
        .splash-logo span { font-size: 85px; font-weight: 900; color: #000; opacity: 0; display: inline-block; animation: glowBlack 1.2s forwards; }
        @keyframes glowBlack { to { opacity: 1; } }
        @keyframes forceHide { to { opacity: 0; visibility: hidden; } }
        .splash-logo span:nth-child(1) { animation-delay: 0.2s; } .splash-logo span:nth-child(2) { animation-delay: 0.4s; }
        .splash-logo span:nth-child(3) { animation-delay: 0.6s; } .splash-logo span:nth-child(4) { animation-delay: 0.8s; }
        .splash-logo span:nth-child(5) { animation-delay: 1.0s; } .splash-logo span:nth-child(6) { animation-delay: 1.2s; }
        .splash-logo span:nth-child(7) { animation-delay: 1.4s; }

        /* === STATİK YAN MENÜ === */
        #sidebar { position: fixed; left: 0; top: 0; bottom: 0; width: 80px; background: #f1c40f; z-index: 500; display: flex; flex-direction: column; align-items: center; padding-top: 40px; }
        .menu-item { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 12px; margin-bottom: 20px; border: 4px solid transparent; }
        .menu-item:focus { background: rgba(0,0,0,0.2); border-color: #000; transform: scale(1.1); }
        .menu-icon { width: 35px; height: 35px; filter: brightness(0); }

        /* === ANA İÇERİK === */
        #main-app { position: fixed; left: 80px; top: 0; right: 0; bottom: 0; background: #000; display: flex; flex-direction: column; }
        .hero { position: relative; height: 55vh; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/kapak.png") center/cover; display: flex; align-items: flex-end; padding: 20px 60px; }
        .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to bottom, transparent 30%, #000 100%); }
        .cover-title { font-size: 50px; font-weight: bold; z-index: 5; }
        .ui-footer { height: 45vh; padding-bottom: 20px; display: flex; flex-direction: column; }
        .seasons { display: flex; gap: 10px; padding: 10px 60px; }
        .season-btn { background: #1a1a1a; padding: 8px 18px; border-radius: 8px; color: #ccc; border: 3px solid transparent; cursor: pointer; }
        .season-btn:focus { border-color: #f1c40f; color: #fff; }
        .season-btn.active { border-bottom: 3px solid #f1c40f; color: #f1c40f; }
        .episodes { display: flex; gap: 15px; padding: 10px 60px; overflow-x: auto; scrollbar-width: none; }
        .episode-card { min-width: 220px; height: 125px; border-radius: 10px; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/gibitvcover.png") center/cover; border: 3px solid transparent; display: flex; align-items: flex-end; flex-shrink: 0; }
        .episode-card:focus { border-color: #f1c40f; transform: scale(1.08); z-index: 20; }
        .episode-card span { padding: 10px; background: rgba(0,0,0,0.7); width: 100%; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* === PLAYER & UI === */
        #video-player-container { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; }
        video { width: 100%; height: 100%; }
        #loading-screen { position: absolute; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 10001; }
        .spinner { width: 75px; height: 75px; border: 8px solid rgba(255,255,255,0.1); border-top: 8px solid #f1c40f; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        #player-ui { position: absolute; bottom: 0; left: 0; right: 0; padding: 40px 60px; background: linear-gradient(transparent, rgba(0,0,0,0.95)); transition: opacity 0.5s; opacity: 0; display: flex; flex-direction: column; gap: 15px; }
        .progress-bar-container { width: 100%; height: 8px; background: rgba(255,255,255,0.3); border-radius: 4px; overflow: hidden; }
        #progress-fill { width: 0%; height: 100%; background: #f1c40f; }
        
        .controls-row { display: flex; align-items: center; justify-content: space-between; }
        .player-buttons { display: flex; gap: 20px; align-items: center; }
        .ctrl-btn { background: transparent; border: 2px solid #fff; color: #fff; font-size: 20px; padding: 8px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .ctrl-btn:focus { border-color: #f1c40f; color: #f1c40f; transform: scale(1.1); background: rgba(255,255,255,0.1); }
        .time-info { font-size: 20px; font-weight: bold; font-variant-numeric: tabular-nums; }

        /* === EXIT POPUP === */
        #exit-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 20000; display: none; justify-content: center; align-items: center; }
        .popup-content { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 2px solid #f1c40f; text-align: center; }
        .popup-btns { display: flex; gap: 20px; margin-top: 30px; justify-content: center; }
        .popup-btn { padding: 15px 50px; border-radius: 12px; border: none; font-weight: bold; font-size: 20px; cursor: pointer; }
        .btn-confirm { background: #f1c40f; color: #000; }
        .btn-cancel { background: #333; color: #fff; }
        .popup-btn:focus { outline: 4px solid #fff; transform: scale(1.1); }
    </style>
</head>
<body>

<audio id="login-sound"><source src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/sounds/gibitvlogin.mp3" type="audio/mpeg"></audio>

<div id="splash"><div class="splash-logo"><span>E</span><span>D</span><span>M</span><span>O</span><span>R</span><span>T</span><span>V</span></div></div>

<nav id="sidebar">
    <div class="menu-item" tabindex="0" id="nav-diziler"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/series.png" class="menu-icon"></div>
    <div class="menu-item" tabindex="0" id="nav-filmler"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/movies.png" class="menu-icon"></div>
    <div class="menu-item" tabindex="0" id="nav-canli"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/tv.png" class="menu-icon"></div>
    <div class="menu-item" tabindex="0" id="nav-ayarlar" style="margin-top: auto; margin-bottom: 30px;"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/settings.png" class="menu-icon"></div>
</nav>

<div id="main-app">
    <div class="hero"><div class="cover-title">EDMORTV</div></div>
    <div class="ui-footer">
        <div class="seasons" id="season-buttons">
            <button class="season-btn" data-season="1">Sezon 1</button>
            <button class="season-btn" data-season="2">Sezon 2</button>
            <button class="season-btn" data-season="3">Sezon 3</button>
            <button class="season-btn" data-season="4">Sezon 4</button>
            <button class="season-btn" data-season="5">Sezon 5</button>
            <button class="season-btn" data-season="6">Sezon 6</button>
        </div>
        <div id="episodes" class="episodes"></div>
    </div>
</div>

<div id="video-player-container">
    <div id="loading-screen"><div class="spinner"></div></div>
    <video id="main-video" playsinline></video>
    
    <div id="player-ui">
        <div class="progress-bar-container"><div id="progress-fill"></div></div>
        <div class="controls-row">
            <div class="player-buttons">
                <button id="btn-rewind" class="ctrl-btn">⏪ 10s</button>
                <button id="btn-play" class="ctrl-btn">⏯ Oynat/Durdur</button>
                <button id="btn-forward" class="ctrl-btn">10s ⏩</button>
            </div>
            <div class="time-info">
                <span id="current-time">00:00</span> / <span id="duration-time">00:00</span>
            </div>
        </div>
    </div>
</div>

<div id="exit-popup">
    <div class="popup-content">
        <h2 style="color:#f1c40f">EDMORTV</h2><p>Uygulamadan çıkmak istiyor musunuz?</p>
        <div class="popup-btns">
            <button id="exit-confirm" class="popup-btn btn-confirm">EVET</button>
            <button id="exit-cancel" class="popup-btn btn-cancel">HAYIR</button>
        </div>
    </div>
</div>

<script>
    // --- VERİ TABANI (1-6 TÜM SEZONLAR EKSİKSİZ) ---
    const episodeData = {
        1: [
            {name:"1. Kokariç", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/1%20-%20Kokari%C3%A7.mp4"},
            {name:"2. Vatka", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/2%20-%20Vatka.mp4"},
            {name:"3. Nü Model", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/3%20-%20N%C3%BC%20Model.mp4"},
            {name:"4. Erasmus", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/4%20-%20Erasmuslu%20Yamyam.mp4"},
            {name:"5. Mentor", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/5.mp4"},
            {name:"6. Karanlık Güç", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/6%20-%20Karanl%C4%B1k%20G%C3%BC%C3%A7.mp4"},
            {name:"7. İkinci Yol", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/7.mp4"},
            {name:"8. Badana", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/8%20-%20Badana.mp4"},
            {name:"9. Ayırtma", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/9%20-%20Ay%C4%B1rtma%20Yenilemesi.mp4"},
            {name:"10. Kan Parası", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/10%20-%20Kan%20Paras%C4%B1.mp4"},
            {name:"11. Banyo", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/11%20-%20Y%C4%B1lmaz%20Bey%20Banyo.mp4"},
            {name:"12. Atın Bulunuşu", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/12%20-%20At%C4%B1n%20Bulunu%C5%9Fu.mp4"}
        ],
        2: [
            {name:"1. Vücutçu Yalvaç", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/1.mp4"},
            {name:"2. Kuki", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/2.mp4"},
            {name:"3. Bej", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/3.mp4"},
            {name:"4. Sokak Röportajı", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/4.mp4"},
            {name:"5. Çaça ve Cosplay", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/5.mp4"},
            {name:"6. İki İçi Dışı Bir Kişi", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/6.mp4"},
            {name:"7. Gelin Başı", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/7.mp4"},
            {name:"8. Resimdeki Ünlü", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/8.mp4"},
            {name:"9. Eşref Hidayet", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/9.mp4"},
            {name:"10. Vita Brevis", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/10.mp4"}
        ],
        3: [
            {name:"1. Sarışın ve Kotlu", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/1.mp4"},
            {name:"2. Keskin Nişancı", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/2.mp4"},
            {name:"3. Büfe", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/3.mp4"},
            {name:"4. Sınıfsal Veda", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/4.mp4"},
            {name:"5. Mazbut Bir Hayat", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/5.mp4"},
            {name:"6. Ghosting", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/6.mp4"},
            {name:"7. Teşekkürler", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/7.mp4"},
            {name:"8. Gülnuray", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/8.mp4"},
            {name:"9. Bilanço", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/9.mp4"},
            {name:"10. Birinci Kabak", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/10.mp4"}
        ],
        4: [
            {name:"1. Övgü", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/1.mp4"},
            {name:"2. Bin", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/2.mp4"},
            {name:"3. Orta Yaş Krizi", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/3.mp4"},
            {name:"4. Kafa Nakli", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/4.mp4"},
            {name:"5. Patern", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/5.mp4"},
            {name:"6. 165", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/6.mp4"},
            {name:"7. Dönen Tekme", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/7.mp4"},
            {name:"8. Defter", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/8.mp4"},
            {name:"9. Dirty Talk", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/9.mp4"},
            {name:"10. Eğitim Öğretim", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/10.mp4"}
        ],
        5: [
            {name:"1. Sinek", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E1%20-%20Sinek.mp4"},
            {name:"2. Kahır", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E2%20-%20Kah%C4%B1r.mp4"},
            {name:"3. Şako Bosphorus", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E3%20-%20%C5%9Eako%20Bosphorus.mp4"},
            {name:"4. Yokluk", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E4%20-%20Yokluk.mp4"},
            {name:"5. Böbrek Taşı", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E5%20-%20B%C3%96BREK%20TA%C5%9EI.mp4"},
            {name:"6. Aşağılık Adam", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/6.mp4"},
            {name:"7. Leopar", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E7%20-%20Leopar.mp4"},
            {name:"8. Şadan", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E8%20-%20%C5%9Eadan.mp4"},
            {name:"9. İrade", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E9%20-%20%C4%B0rade.mp4"},
            {name:"10. Geleceğin Habercisi", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E10.mp4"},
            {name:"11. Kenan Ticaret", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20SE11-%20KENAN%20T%C4%B0CARET.mp4"},
            {name:"12. Kuzgunlar 1", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/S5E12.mp4"},
            {name:"13. Kuzgunlar 2", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E13.mp4"}
        ],
        6: [
            {name:"1. Waffle", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/Gibi0601%20-%20Waffle.mp4"},
            {name:"2. Mikrodalga", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/Gibi0602.mp4"},
            {name:"3. Girls Night Out", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/G%C4%B0B%C4%B00603.mp4"},
            {name:"4. Metin", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00604.mp4"},
            {name:"5. Nomen est Omen", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00605.mp4"},
            {name:"6. Çağrı", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00606.mp4"},
            {name:"7. Gece Kaplanları", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00607.mp4"},
            {name:"8. Çöl Defnesi", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00608.mp4"},
            {name:"9. Jumbo", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00609.mp4"},
            {name:"10. İyilik Sağlık", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0S0610.mp4"},
            {name:"11. Başkaları", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x11.mp4"},
            {name:"12. Yapılanlar 1", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x12.mp4"},
            {name:"13. Yapılanlar 2", url:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x13.mp4"}
        ]
    };

    const vCont = document.getElementById("video-player-container"), vMain = document.getElementById("main-video"), loader = document.getElementById("loading-screen");
    const pUI = document.getElementById("player-ui"), pFill = document.getElementById("progress-fill");
    const cTime = document.getElementById("current-time"), dTime = document.getElementById("duration-time");
    const btnPlay = document.getElementById("btn-play"), btnRew = document.getElementById("btn-rewind"), btnFwd = document.getElementById("btn-forward");
    let lastFocus, uiTimer;

    function formatTime(s) { let m=Math.floor(s/60), sec=Math.floor(s%60); return (m<10?"0"+m:m)+":"+(sec<10?"0"+sec:sec); }
    function showUI() { pUI.style.opacity = 1; clearTimeout(uiTimer); uiTimer = setTimeout(() => { pUI.style.opacity = 0; }, 4000); }
    function closeVideo() { vMain.pause(); vMain.src=""; vCont.style.display="none"; if(lastFocus) lastFocus.focus(); }

    function loadSeason(s) {
        const epEl = document.getElementById("episodes"); epEl.innerHTML = "";
        (episodeData[s] || []).forEach(ep => {
            const d = document.createElement("div"); d.className = "episode-card"; d.tabIndex = 0;
            d.innerHTML = `<span>${ep.name}</span>`;
            d.onclick = () => { 
                lastFocus = d; vCont.style.display="flex"; loader.style.display="flex";
                vMain.src=ep.url; vMain.load(); vMain.play();
                btnPlay.focus(); 
            };
            d.onfocus = () => d.scrollIntoView({ behavior:'smooth', inline:'center'});
            epEl.appendChild(d);
        });
    }

    // --- PLAYER BUTONLARI ---
    btnPlay.onclick = () => { vMain.paused ? vMain.play() : vMain.pause(); };
    btnRew.onclick = () => { vMain.currentTime -= 10; };
    btnFwd.onclick = () => { vMain.currentTime += 10; };

    vMain.onplaying = () => { loader.style.display="none"; btnPlay.innerHTML = "⏸"; showUI(); };
    vMain.onpause = () => { btnPlay.innerHTML = "▶"; showUI(); };
    vMain.ontimeupdate = () => {
        let per = (vMain.currentTime / vMain.duration) * 100;
        pFill.style.width = per + "%";
        cTime.innerText = formatTime(vMain.currentTime);
        dTime.innerText = formatTime(vMain.duration || 0);
    };

    // --- EXIT LOGIC ---
    document.getElementById("exit-cancel").onclick = () => { document.getElementById("exit-popup").style.display="none"; if(lastFocus) lastFocus.focus(); };
    document.getElementById("exit-confirm").onclick = () => { if(window.AndroidBridge) window.AndroidBridge.closeApp(); else window.close(); };

    document.querySelectorAll(".season-btn").forEach(btn => btn.onclick = () => {
        document.querySelectorAll(".season-btn").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active"); loadSeason(btn.dataset.season);
    });

    window.onload = () => { 
        loadSeason(1); document.querySelectorAll(".season-btn")[0].classList.add("active"); 
        setTimeout(() => { document.getElementById("login-sound").play().catch(e=>{}); }, 200);
        setTimeout(() => document.querySelectorAll(".season-btn")[0].focus(), 4600); 
    };

    // --- NAVİGASYON ---
    window.addEventListener('keydown', function(e) {
        const focused = document.activeElement;
        const isVideoOpen = vCont.style.display === "flex";
        const isExitOpen = document.getElementById("exit-popup").style.display === "flex";

        // 1. GERİ TUŞU (VIDEO -> MENÜ -> EXIT POPUP -> CLOSE APP)
        if (e.keyCode === 8 || e.keyCode === 27 || e.keyCode === 10009) {
            e.preventDefault();
            if (isVideoOpen) {
                closeVideo();
            } else if (isExitOpen) {
                document.getElementById("exit-cancel").click();
            } else {
                lastFocus = focused;
                document.getElementById("exit-popup").style.display = "flex";
                document.getElementById("exit-cancel").focus();
            }
            return;
        }

        // 2. VIDEO PLAYER KONTROLLERİ (DPAD)
        if (isVideoOpen) {
            showUI();
            if (e.keyCode === 37) { // SOL
                if (focused === btnRew || focused === btnPlay || focused === btnFwd) {
                    // Butonlar arasında geziyorsa varsayılan davranış
                } else {
                    vMain.currentTime -= 10; // Değilse direkt sar
                }
            }
            if (e.keyCode === 39) { // SAĞ
                if (focused === btnRew || focused === btnPlay || focused === btnFwd) {
                    // Butonlar arasında geziyorsa varsayılan davranış
                } else {
                    vMain.currentTime += 10; // Değilse direkt sar
                }
            }
            if (e.keyCode === 13 && !focused.classList.contains('ctrl-btn')) { 
                // Odak butonda değilse OK tuşu videoyu durdur/başlat
                vMain.paused ? vMain.play() : vMain.pause(); 
            }
            return;
        }

        // 3. EXIT POPUP KONTROLLERİ
        if (isExitOpen) {
            if (e.keyCode === 37) document.getElementById("exit-confirm").focus();
            if (e.keyCode === 39) document.getElementById("exit-cancel").focus();
            return;
        }

        // 4. ANA MENÜ NAVİGASYONU
        if (e.keyCode === 37 && !focused.classList.contains('menu-item')) {
            const firstS = document.querySelectorAll('.season-btn')[0];
            const firstE = document.querySelectorAll('.episode-card')[0];
            if (focused === firstS || focused === firstE) {
                lastFocus = focused; document.getElementById('nav-diziler').focus();
            }
        }
        if (e.keyCode === 39 && focused.classList.contains('menu-item')) {
            if(lastFocus) lastFocus.focus(); else document.querySelector('.season-btn.active').focus();
        }
        if (focused.classList.contains('season-btn') && e.keyCode === 40) {
            document.querySelector('.episode-card').focus(); e.preventDefault();
        } else if (focused.classList.contains('episode-card') && e.keyCode === 38) {
            document.querySelector('.season-btn.active').focus(); e.preventDefault();
        }
    }, true);
</script>
</body>
</html>
