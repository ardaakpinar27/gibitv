<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        html, body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; width: 100vw; height: 100vh; overflow: hidden; user-select: none; }

        /* === SPLASH SCREEN === */
        #splash { position: fixed; inset: 0; background: #f1c40f; z-index: 9999; display: flex; justify-content: center; align-items: center; pointer-events: none; animation: forceHide 0.5s forwards; animation-delay: 4.5s; }
        .splash-logo { display: block; text-align: center; width: 100%; }
        .splash-logo span { font-size: 85px; font-weight: 900; color: #000; opacity: 0; display: inline-block; animation: glowBlack 1.2s forwards; }
        @keyframes glowBlack { to { opacity: 1; } }
        @keyframes forceHide { to { opacity: 0; visibility: hidden; } }
        .splash-logo span:nth-child(1) { animation-delay: 0.2s; } .splash-logo span:nth-child(2) { animation-delay: 0.4s; }
        .splash-logo span:nth-child(3) { animation-delay: 0.6s; } .splash-logo span:nth-child(4) { animation-delay: 0.8s; }
        .splash-logo span:nth-child(5) { animation-delay: 1.0s; } .splash-logo span:nth-child(6) { animation-delay: 1.2s; }
        .splash-logo span:nth-child(7) { animation-delay: 1.4s; }

        /* === SABİT YAN MENÜ (SIDEBAR) === */
        #sidebar { position: fixed; left: 0; top: 0; bottom: 0; width: 80px; background: #f1c40f; z-index: 500; display: flex; flex-direction: column; box-shadow: 5px 0 15px rgba(0,0,0,0.5); }
        .menu-items { flex: 1; padding-top: 40px; display: flex; flex-direction: column; align-items: center; }
        .menu-item { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 12px; margin-bottom: 20px; transition: 0.2s; border: 4px solid transparent; }
        .menu-item:focus { background: rgba(0,0,0,0.2); border-color: #000; transform: scale(1.1); }
        .menu-icon { width: 35px; height: 35px; object-fit: contain; filter: brightness(0); }
        .settings-item { margin-bottom: 30px; }

        /* === ANA İÇERİK === */
        #main-app { position: fixed; left: 80px; top: 0; right: 0; bottom: 0; display: flex; flex-direction: column; background: #000; }
        .hero { position: relative; width: 100%; height: 55vh; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/kapak.png") center/cover; display: flex; align-items: flex-end; padding: 20px 60px; }
        .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0) 30%, rgba(0,0,0,1) 100%); }
        .cover-title { font-size: 50px; font-weight: bold; z-index: 5; text-shadow: 0 4px 20px #000; }
        .ui-footer { width: 100%; height: 45vh; background: #000; z-index: 10; display: flex; flex-direction: column; padding-bottom: 20px; }
        .seasons { display: flex; gap: 10px; padding: 10px 60px; }
        .season-btn { background: #1a1a1a; padding: 8px 18px; border-radius: 8px; font-size: 16px; color: #ccc; border: 3px solid transparent; cursor: pointer; }
        .season-btn:focus { border-color: #f1c40f; color: #fff; transform: scale(1.05); }
        .season-btn.active { color: #f1c40f; border-bottom: 3px solid #f1c40f; }
        .episodes { display: flex; gap: 15px; padding: 10px 60px; overflow-x: auto; scroll-behavior: smooth; scrollbar-width: none; flex: 1; }
        .episode-card { min-width: 220px; height: 125px; border-radius: 10px; position: relative; overflow: hidden; display: flex; align-items: flex-end; flex-shrink: 0; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/gibitvcover.png") center/cover; cursor: pointer; border: 3px solid transparent; }
        .episode-card:focus { border-color: #f1c40f; transform: scale(1.08); z-index: 20; }
        .episode-card span { padding: 10px; font-size: 13px; font-weight: 600; background: rgba(0,0,0,0.7); width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* === PLAYER & POPUPS === */
        #video-player-container { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; }
        video { width: 100%; height: 100%; }
        #exit-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 20000; display: none; justify-content: center; align-items: center; }
        .popup-content { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 2px solid #f1c40f; text-align: center; min-width: 450px; }
        .popup-btns { display: flex; gap: 20px; justify-content: center; margin-top: 30px; }
        .popup-btn { padding: 15px 50px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 20px; }
        .btn-confirm { background: #f1c40f; color: #000; }
        .btn-cancel { background: #333; color: #fff; }
        .popup-btn:focus { transform: scale(1.1); outline: 4px solid #fff; }
    </style>
</head>
<body>

<audio id="login-sound" preload="auto">
    <source src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/sounds/gibitvlogin.mp3" type="audio/mpeg">
</audio>

<div id="splash"><div class="splash-logo"><span>E</span><span>D</span><span>M</span><span>O</span><span>R</span><span>T</span><span>V</span></div></div>

<nav id="sidebar">
    <div class="menu-items">
        <div class="menu-item" tabindex="0" id="nav-diziler"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/series.png" class="menu-icon"></div>
        <div class="menu-item" tabindex="0" id="nav-filmler"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/movies.png" class="menu-icon"></div>
        <div class="menu-item" tabindex="0" id="nav-canli"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/tv.png" class="menu-icon"></div>
        <div class="menu-item settings-item" tabindex="0" id="nav-ayarlar" style="margin-top: auto;"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/settings.png" class="menu-icon"></div>
    </div>
</nav>

<div id="main-app">
    <div class="hero"><div class="cover-title">EDMORTV</div></div>
    <div class="ui-footer">
        <div class="seasons" id="seasons-bar">
            <button class="season-btn" data-season="1">Sezon 1</button>
            <button class="season-btn" data-season="2">Sezon 2</button>
            <button class="season-btn" data-season="3">Sezon 3</button>
            <button class="season-btn" data-season="4">Sezon 4</button>
            <button class="season-btn" data-season="5">Sezon 5</button>
            <button class="season-btn" data-season="6">Sezon 6</button>
        </div>
        <div id="episodes" class="episodes"></div>
    </div>
</div>

<div id="video-player-container">
    <video id="main-video" playsinline></video>
</div>

<div id="exit-popup">
    <div class="popup-content">
        <h2 style="color:#f1c40f">ÇIKIŞ</h2><p style="margin-top:10px; font-size:18px;">Uygulamadan çıkmak istiyor musunuz?</p>
        <div class="popup-btns">
            <button id="exit-confirm" class="popup-btn btn-confirm">EVET</button>
            <button id="exit-cancel" class="popup-btn btn-cancel">HAYIR</button>
        </div>
    </div>
</div>

<script>
    const episodeData = {
        1: [
            { name: "1. Kokariç", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/1%20-%20Kokari%C3%A7.mp4" },
            { name: "2. Vatka", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/2%20-%20Vatka.mp4" },
            { name: "3. Nü Model", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/3%20-%20N%C3%BC%20Model.mp4" },
            { name: "4. Erasmus'la Gelen Yamyam", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/4%20-%20Erasmuslu%20Yamyam.mp4" },
            { name: "5. Yanlış Mentor", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/5.mp4" },
            { name: "6. Karanlık Güç", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/6%20-%20Karanl%C4%B1k%20G%C3%BC%C3%A7.mp4" },
            { name: "7. İkinci Yol", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/7.mp4" },
            { name: "8. Badana", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/8%20-%20Badana.mp4" },
            { name: "9. Ayırtma Yenilemesi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/9%20-%20Ay%C4%B1rtma%20Yenilemesi.mp4" },
            { name: "10. Kan Parası", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/10%20-%20Kan%20Paras%C4%B1.mp4" },
            { name: "11. Yılmaz Bey Banyo", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/11%20-%20Y%C4%B1lmaz%20Bey%20Banyo.mp4" },
            { name: "12. Atın Bulunuşu", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/12%20-%20At%C4%B1n%20Bulunu%C5%9Fu.mp4" }
        ],
        2: [
            { name: "1. Vücutçu Yalvaç", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/1.mp4" },
            { name: "2. Kuki", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/2.mp4" },
            { name: "3. Bej", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/3.mp4" },
            { name: "4. Sokak Röportajı", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/4.mp4" },
            { name: "5. Çaça ve Cosplay", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/5.mp4" },
            { name: "6. İki İçi Dışı Bir Kişi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/6.mp4" },
            { name: "7. Gelin Başı", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/7.mp4" },
            { name: "8. Resimdeki Ünlü", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/8.mp4" },
            { name: "9. Eşref Hidayet Gürdal Kültür Merkezi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/9.mp4" },
            { name: "10. Vita Brevis", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/10.mp4" }
        ],
        3: [
            { name: "1. Sarışın ve Kotlu", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/1.B%C3%B6l%C3%BCm%20Sar%C4%B1%C5%9F%C4%B1n%20Ve%20Kotlu.mp4" },
            { name: "2. Keskin Nişancı", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/2.B%C3%B6l%C3%BCm%20Keskin%20Ni%C5%9Fanc%C4%B1.mp4" },
            { name: "3. Büfe", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/3.B%C3%B6l%C3%BCm%20B%C3%BCfe.mp4" },
            { name: "4. Sınıfsal Veda", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/4.B%C3%B6l%C3%BCm%20S%C4%B1n%C4%B1fsal%20Veda.mp4" },
            { name: "5. Mazbut Bir Hayat", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/5.B%C3%B6l%C3%BCm%20Mazbut%20Bir%20Hayat.mp4" },
            { name: "6. Ghosting", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/6.B%C3%B6l%C3%BCm%20Ghosting.mp4" },
            { name: "7. Teşekkürler", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/7.B%C3%B6l%C3%BCm%20Te%C5%9Fekk%C3%BCrler.mp4" },
            { name: "8. Gülnuray", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/8.B%C3%B6l%C3%BCm%20G%C3%BClnuray.mp4" },
            { name: "9. Bilanço", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/9.B%C3%B6l%C3%BCm%20Bilan%C3%A7o.mp4" },
            { name: "10. Birinci Kabak", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/10.B%C3%B6l%C3%BCm%20Birinci%20Kabak.mp4" }
        ],
        4: [
            { name: "1. Övgü", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/1.B%C3%B6l%C3%BCm%20%C3%96vg%C3%BC.mp4" },
            { name: "2. Bin", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/2.B%C3%B6l%C3%BCm%20Bin.mp4" },
            { name: "3. Orta Yaş Krizi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/3.B%C3%B6l%C3%BCm%20Orta%20Ya%C5%9F%20Krizi.mp4" },
            { name: "4. Kafa Nakli", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/4.B%C3%B6l%C3%BCm%20Kafa%20Nakli.mp4" },
            { name: "5. Patern", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/5.B%C3%B6l%C3%BCm%20Patern.mp4" },
            { name: "6. 165", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/6.B%C3%B6l%C3%BCm%20165.mp4" },
            { name: "7. Dönen Tekme", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/7.B%C3%B6l%C3%BCm%20D%C3%B6nen%20Tekme.mp4" },
            { name: "8. Defter", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/8.B%C3%B6l%C3%BCm%20Defter.mp4" },
            { name: "9. Dirty Talk", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/9.B%C3%B6l%C3%BCm%20Dirty%20Talk.mp4" },
            { name: "10. Eğitim Öğretim", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/10.B%C3%B6l%C3%BCm%20E%C4%9E%C4%B0T%C4%B0M%20%C3%96%C4%9ERET%C4%B0M%20YILI.mp4" }
        ],
        5: [
            { name: "1. Sinek", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E1%20-%20Sinek.mp4" },
            { name: "2. Kahır", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E2%20-%20Kah%C4%B1r.mp4" },
            { name: "3. Şako", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E3%20-%20%C5%9Eako%20Bosphorus.mp4" },
            { name: "4. Yokluk", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E4%20-%20Yokluk.mp4" },
            { name: "5. Böbrek Taşı", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E5%20-%20B%C3%96BREK%20TA%C5%9EI.mp4" },
            { name: "6. Aşağılık Adam", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/6.mp4" },
            { name: "7. Leopar", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E7%20-%20Leopar.mp4" },
            { name: "8. Şadan", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E8%20-%20%C5%9Eadan.mp4" },
            { name: "9. İrade", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E9%20-%20%C4%B0rade.mp4" },
            { name: "10. Geleceğin Habercisi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E10.mp4" },
            { name: "11. Kenan Ticaret", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20SE11-%20KENAN%20T%C4%B0CARET.mp4" },
            { name: "12. Demir Kalenin Kuzgunları 1", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/S5E12.mp4" },
            { name: "13. Demir Kalenin Kuzgunları 2", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E13.mp4" }
        ],
        6: [
            { name: "1. Waffle", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/Gibi0601%20-%20Waffle.mp4" },
            { name: "2. Mikrodalga", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/Gibi0602.mp4" },
            { name: "3. Girls Night Out", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00603.mp4" },
            { name: "4. Metin", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00604.mp4" },
            { name: "5. Nomen est Omen", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00605.mp4" },
            { name: "6. Çağrı", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00606.mp4" },
            { name: "7. Gece Kaplanları", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00607.mp4" },
            { name: "8. Çöl Defnesi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00608.mp4" },
            { name: "9. Jumbo", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B00609.mp4" },
            { name: "10. İyilik Sağlık", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0S0610.mp4" },
            { name: "11. Başkaları", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x11.mp4" },
            { name: "12. Yapılanlar 1", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x12.mp4" },
            { name: "13. Yapılanlar 2", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6x13.mp4" }
        ]
    };

    const epEl = document.getElementById("episodes"), sBtns = document.querySelectorAll(".season-btn");
    const vCont = document.getElementById("video-player-container"), vMain = document.getElementById("main-video");
    let lastFocus;

    function closeVideo() { vMain.pause(); vMain.src=""; vCont.style.display="none"; if(lastFocus) lastFocus.focus(); }
    
    function loadSeason(s) {
        epEl.innerHTML = "";
        (episodeData[s] || []).forEach(ep => {
            const d = document.createElement("div"); d.className = "episode-card"; d.tabIndex = 0;
            d.innerHTML = `<span>${ep.name}</span>`;
            d.onclick = () => { lastFocus = d; vCont.style.display="flex"; vMain.src=ep.url; vMain.play(); };
            d.onfocus = () => d.scrollIntoView({ behavior:'smooth', inline:'center'});
            epEl.appendChild(d);
        });
    }

    document.getElementById("exit-cancel").onclick = () => { document.getElementById("exit-popup").style.display="none"; if(lastFocus) lastFocus.focus(); };
    document.getElementById("exit-confirm").onclick = () => { if(window.AndroidBridge) window.AndroidBridge.closeApp(); else window.history.back(); };

    sBtns.forEach(btn => btn.onclick = () => { sBtns.forEach(b=>b.classList.remove("active")); btn.classList.add("active"); loadSeason(btn.dataset.season); });

    window.onload = () => { 
        loadSeason(1); sBtns[0].classList.add("active"); 
        setTimeout(() => { document.getElementById("login-sound").play().catch(e=>{}); }, 200);
        setTimeout(() => sBtns[0].focus(), 4600); 
    };

    // --- DPAD NAVİGASYON ---
    document.addEventListener('keydown', (e) => {
        const focused = document.activeElement;
        const isMenuItem = focused.classList.contains('menu-item');
        const isExitOpen = document.getElementById("exit-popup").style.display === "flex";

        // 1. VİDEO AÇIKKEN GERİ TUŞU
        if (vCont.style.display === "flex") {
            if(e.keyCode === 8 || e.keyCode === 27) { e.preventDefault(); closeVideo(); }
            return;
        }

        // 2. ÇIKIŞ POPUP AÇIKKEN GERİ TUŞU
        if (isExitOpen) {
            if(e.keyCode === 8 || e.keyCode === 27) { e.preventDefault(); document.getElementById("exit-cancel").click(); }
            return;
        }

        // 3. ANA EKRANDA GERİ TUŞU -> ÇIKIŞ POPUP AÇ
        if (e.keyCode === 8 || e.keyCode === 27) {
            e.preventDefault();
            lastFocus = focused;
            document.getElementById("exit-popup").style.display = "flex";
            document.getElementById("exit-cancel").focus();
            return;
        }

        // 4. SOL DPAD -> MENÜYE GEÇ (Sadece en soldaki öğedeyken)
        if (e.keyCode === 37 && !isMenuItem) {
            if (focused === document.querySelectorAll('.season-btn')[0] || focused === document.querySelectorAll('.episode-card')[0]) {
                lastFocus = focused;
                document.getElementById('nav-diziler').focus();
                return;
            }
        }

        // 5. SAĞ DPAD -> MENÜDEN ÇIK
        if (e.keyCode === 39 && isMenuItem) {
            if(lastFocus) lastFocus.focus();
            else document.querySelector('.season-btn.active').focus();
            return;
        }

        // 6. DİKEY NAVİGASYON
        if (focused.classList.contains('season-btn') && e.keyCode === 40) { 
            const e1 = document.querySelector('.episode-card'); if(e1) e1.focus(); e.preventDefault(); 
        } else if (focused.classList.contains('episode-card') && e.keyCode === 38) { 
            document.querySelector('.season-btn.active').focus(); e.preventDefault(); 
        }
    });
</script>
</body>
</html>
