<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDMORTV - GİBİ FULL</title>
    <style>
        /* === 4K TV OPTİMİZASYONU === */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        html, body { 
            background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; 
            width: 100vw; height: 100vh; overflow: hidden; user-select: none;
        }

        /* SPLASH SCREEN */
        #splash { position: fixed; inset: 0; background: #f1c40f; z-index: 9999; display: flex; justify-content: center; align-items: center; pointer-events: none; animation: forceHide 0.5s forwards 4.5s; }
        .splash-logo span { font-size: 8vw; font-weight: 900; color: #000; opacity: 0; display: inline-block; animation: glowBlack 1.2s forwards; text-shadow: 0 0 20px rgba(0,0,0,0.3); }
        @keyframes glowBlack { to { opacity: 1; } }
        @keyframes forceHide { to { opacity: 0; visibility: hidden; } }
        .splash-logo span:nth-child(n) { animation-delay: calc(var(--i) * 0.2s); }

        /* ANA EKRAN */
        #main-app { position: fixed; inset: 0; display: flex; flex-direction: column; background: #000; }
        .hero { position: relative; width: 100%; height: 38vh; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/kapak.png") center/cover; display: flex; align-items: flex-end; padding: 2vh 5vw; }
        .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to bottom, transparent 20%, #000 100%); }
        .cover-title { font-size: 5vw; font-weight: 900; z-index: 5; text-shadow: 0 0.5vh 2vh #000; color: #f1c40f; margin-bottom: -1vh; }

        .content-area { flex: 1; display: flex; flex-direction: column; padding: 0 3vw 2vh 3vw; z-index: 10; justify-content: center; }

        /* SEZONLAR */
        .seasons-row { 
            display: flex; gap: 1vw; margin-bottom: 2.5vh; overflow-x: auto; 
            padding: 1.5vh 2vw; 
            scrollbar-width: none; 
        }
        .season-btn { 
            background: #111; color: #888; height: 5.5vh; padding: 0 2.5vw; border-radius: 6vh; 
            font-size: 1.8vh; font-weight: 700; border: 0.3vh solid transparent; cursor: pointer; 
            flex-shrink: 0; display: flex; align-items: center; justify-content: center; transition: 0.2s; 
        }
        .season-btn:focus { 
            border-color: #f1c40f; color: #fff; background: #222; transform: scale(1.05); 
            box-shadow: 0 0 2vh rgba(241, 196, 15, 0.6); 
        }
        .season-btn.active { background: #f1c40f; color: #000; border-color: #f1c40f; }

        /* BÖLÜMLER */
        .episodes-row { 
            display: flex; gap: 1.5vw; overflow-x: auto; 
            padding: 2.5vh 2vw; 
            scrollbar-width: none; 
        }
        .episode-card { 
            min-width: 16vw; height: 17vh; border-radius: 1.2vh; 
            background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/gibitvcover.png") center/cover; 
            border: 0.4vh solid transparent; display: flex; align-items: flex-end; 
            flex-shrink: 0; overflow: hidden; transition: 0.2s; 
        }
        .episode-card:focus { 
            border-color: #f1c40f; transform: scale(1.12); z-index: 20; 
            box-shadow: 0 1.5vh 4vh rgba(241, 196, 15, 0.5); 
        }
        .episode-name { width: 100%; padding: 1vh; background: rgba(0,0,0,0.85); color: #fff; font-size: 1.4vh; font-weight: 600; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* PLAYER UI & LOADING */
        #video-player-container { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; }
        video { width: 100%; height: 100%; }
        
        #loading-screen { 
            position: absolute; inset: 0; background: #000; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            z-index: 10001; 
        }
        .spinner { width: 7vh; height: 7vh; border: 0.7vh solid rgba(255,255,255,0.1); border-top: 0.7vh solid #f1c40f; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* YAVAŞ YÜKLENME UYARISI */
        #timeout-message {
            margin-top: 3vh;
            color: #f1c40f;
            font-size: 2.2vh;
            font-weight: bold;
            text-align: center;
            display: none; /* Başlangıçta gizli */
            animation: fadeIn 0.5s ease;
            text-shadow: 0 0 10px rgba(241, 196, 15, 0.3);
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #player-ui { position: absolute; bottom: 0; left: 0; right: 0; padding: 4vh 5vw; background: linear-gradient(transparent, rgba(0,0,0,0.95)); transition: opacity 0.5s; opacity: 0; }
        .progress-bar-bg { width: 100%; height: 0.8vh; background: rgba(255,255,255,0.2); border-radius: 0.4vh; overflow: hidden; margin-bottom: 2vh; }
        #progress-fill { width: 0%; height: 100%; background: #f1c40f; }
        .controls-wrapper { display: flex; align-items: center; justify-content: center; position: relative; }
        .buttons-group { display: flex; gap: 3vw; }
        .ctrl-btn { background: transparent; border: 0.4vh solid transparent; padding: 0.5vh; border-radius: 50%; outline: none; transition: 0.2s; }
        .ctrl-btn img { width: 5vh; height: 5vh; }
        .ctrl-btn:focus { border-color: #f1c40f; background: rgba(241, 196, 15, 0.2); transform: scale(1.2); box-shadow: 0 0 2vh rgba(241, 196, 15, 0.6); }
        .time-display { position: absolute; right: 0; font-size: 2.2vh; font-weight: bold; font-family: monospace; }

        /* EXIT POPUP */
        #exit-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 20000; display: none; justify-content: center; align-items: center; }
        .popup-box { background: #111; padding: 5vh 5vw; border-radius: 2vh; border: 0.3vh solid #f1c40f; text-align: center; }
        .p-btn { padding: 1.5vh 3vw; border-radius: 1vh; border: 0.3vh solid transparent; font-size: 2.2vh; font-weight: bold; cursor: pointer; margin: 0 1vw; }
        .btn-yes { background: #f1c40f; color: #000; }
        .btn-no { background: #333; color: #fff; }
        .p-btn:focus { border-color: #fff; transform: scale(1.1); box-shadow: 0 0 1.5vh #fff; }
    </style>
</head>
<body>

<audio id="login-sound"><source src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/sounds/gibitvlogin.mp3" type="audio/mpeg"></audio>

<div id="splash"><div class="splash-logo"><span style="--i:1">E</span><span style="--i:2">D</span><span style="--i:3">M</span><span style="--i:4">O</span><span style="--i:5">R</span><span style="--i:6">T</span><span style="--i:7">V</span></div></div>

<div id="main-app">
    <div class="hero"><div class="cover-title">GİBİ</div></div>
    <div class="content-area">
        <div class="seasons-row" id="season-list">
            <button class="season-btn" data-s="1">Sezon 1</button>
            <button class="season-btn" data-s="2">Sezon 2</button>
            <button class="season-btn" data-s="3">Sezon 3</button>
            <button class="season-btn" data-s="4">Sezon 4</button>
            <button class="season-btn" data-s="5">Sezon 5</button>
            <button class="season-btn" data-s="6">Sezon 6</button>
        </div>
        <div class="episodes-row" id="episode-list"></div>
    </div>
</div>

<div id="video-player-container">
    <div id="loading-screen">
        <div class="spinner"></div>
        <div id="timeout-message">İçeriğin açılması çok zaman aldı,<br>lütfen çözüm için iletişime geçin.</div>
    </div>
    <video id="main-video" playsinline></video>
    <div id="player-ui">
        <div class="progress-bar-bg"><div id="progress-fill"></div></div>
        <div class="controls-wrapper">
            <div class="buttons-group">
                <div class="ctrl-btn" id="btn-rew" tabindex="0"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/forwardback.png"></div>
                <div class="ctrl-btn" id="btn-play" tabindex="0"><img id="img-play" src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/pause.png"></div>
                <div class="ctrl-btn" id="btn-fwd" tabindex="0"><img src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/forward.png"></div>
            </div>
            <div class="time-display"><span id="cur-time">00:00</span> / <span id="dur-time">00:00</span></div>
        </div>
    </div>
</div>

<div id="exit-popup">
    <div class="popup-box">
        <h2 style="color:#f1c40f; margin-bottom: 2vh;">EDMORTV</h2>
        <p style="margin-bottom: 4vh;">Uygulamadan çıkmak istiyor musunuz?</p>
        <div class="popup-btns">
            <button class="p-btn btn-yes" id="exit-yes">EVET</button>
            <button class="p-btn btn-no" id="exit-no">HAYIR</button>
        </div>
    </div>
</div>

<script>
    // --- TAM SEZON VERİSİ (1-6 EKSİKSİZ) ---
    const allEpisodes = {
        1: [
            {n:"1. Kokariç", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/1%20-%20Kokari%C3%A7.mp4"},
            {n:"2. Vatka", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/2%20-%20Vatka.mp4"},
            {n:"3. Nü Model", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/3%20-%20N%C3%BC%20Model.mp4"},
            {n:"4. Erasmus", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/4%20-%20Erasmuslu%20Yamyam.mp4"},
            {n:"5. Mentor", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/5.mp4"},
            {n:"6. Karanlık Güç", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/6%20-%20Karanl%C4%B1k%20G%C3%BC%C3%A7.mp4"},
            {n:"7. İkinci Yol", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/7.mp4"},
            {n:"8. Badana", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/8%20-%20Badana.mp4"},
            {n:"9. Ayırtma", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/9%20-%20Ay%C4%B1rtma%20Yenilemesi.mp4"},
            {n:"10. Kan Parası", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/10%20-%20Kan%20Paras%C4%B1.mp4"},
            {n:"11. Banyo", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/11%20-%20Y%C4%B1lmaz%20Bey%20Banyo.mp4"},
            {n:"12. Atın Bulunuşu", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/12%20-%20At%C4%B1n%20Bulunu%C5%9Fu.mp4"}
        ],
        2: [
            {n:"1. Vücutçu Yalvaç", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/1.mp4"},
            {n:"2. Kuki", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/2.mp4"},
            {n:"3. Bej", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/3.mp4"},
            {n:"4. Sokak Röportajı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/4.mp4"},
            {n:"5. Çaça ve Cosplay", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/5.mp4"},
            {n:"6. İki İçi Dışı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/6.mp4"},
            {n:"7. Gelin Başı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/7.mp4"},
            {n:"8. Resimdeki Ünlü", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/8.mp4"},
            {n:"9. Eşref Hidayet", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/9.mp4"},
            {n:"10. Vita Brevis", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%202/10.mp4"}
        ],
        3: [
            {n:"1. Sarışın ve Kotlu", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/1.mp4"},
            {n:"2. Keskin Nişancı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/2.B%C3%B6l%C3%BCm%20Keskin%20Ni%C5%9Fanc%C4%B1.mp4"},
            {n:"3. Büfe", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/3.B%C3%B6l%C3%BCm%20B%C3%BCfe.mp4"},
            {n:"4. Sınıfsal Veda", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/4.B%C3%B6l%C3%BCm%20S%C4%B1n%C4%B1fsal%20Veda.mp4"},
            {n:"5. Mazbut Bir Hayat", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/5.B%C3%B6l%C3%BCm%20Mazbut%20Bir%20Hayat.mp4"},
            {n:"6. Ghosting", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/6.B%C3%B6l%C3%BCm%20Ghosting.mp4"},
            {n:"7. Teşekkürler", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/7.B%C3%B6l%C3%BCm%20Te%C5%9Fekk%C3%BCrler.mp4"},
            {n:"8. Gülnuray", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/8.B%C3%B6l%C3%BCm%20G%C3%BClnuray.mp4"},
            {n:"9. Bilanço", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/9.B%C3%B6l%C3%BCm%20Bilan%C3%A7o.mp4"},
            {n:"10. Birinci Kabak", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%203/10.B%C3%B6l%C3%BCm%20Birinci%20Kabak.mp4"}
        ],
        4: [
            {n:"1. Övgü", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/1.B%C3%B6l%C3%BCm%20%C3%96vg%C3%BC.mp4"},
            {n:"2. Bin", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/2.B%C3%B6l%C3%BCm%20Bin.mp4"},
            {n:"3. Orta Yaş Krizi", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/3.B%C3%B6l%C3%BCm%20Orta%20Ya%C5%9F%20Krizi.mp4"},
            {n:"4. Kafa Nakli", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/4.B%C3%B6l%C3%BCm%20Kafa%20Nakli.mp4"},
            {n:"5. Patern", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/5.B%C3%B6l%C3%BCm%20Patern.mp4"},
            {n:"6. 165", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/6.B%C3%B6l%C3%BCm%20165.mp4"},
            {n:"7. Dönen Tekme", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/7.B%C3%B6l%C3%BCm%20D%C3%B6nen%20Tekme.mp4"},
            {n:"8. Defter", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/8.B%C3%B6l%C3%BCm%20Defter.mp4"},
            {n:"9. Dirty Talk", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/9.B%C3%B6l%C3%BCm%20Dirty%20Talk.mp4"},
            {n:"10. Eğitim Öğretim", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%204/10.B%C3%B6l%C3%BCm%20E%C4%9E%C4%B0T%C4%B0M%20%C3%96%C4%9ERET%C4%B0M%20YILI.mp4"}
        ],
        5: [
            {n:"1. Sinek", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E1%20-%20Sinek.mp4"},
            {n:"2. Kahır", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E2%20-%20Kah%C4%B1r.mp4"},
            {n:"3. Şako Bosphorus", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E3%20-%20%C5%9Eako%20Bosphorus.mp4"},
            {n:"4. Yokluk", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E4%20-%20Yokluk.mp4"},
            {n:"5. Böbrek Taşı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E5%20-%20B%C3%96BREK%20TA%C5%9EI.mp4"},
            {n:"6. Aşağılık Adam", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/6.mp4"},
            {n:"7. Leopar", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E7%20-%20Leopar.mp4"},
            {n:"8. Şadan", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20S5E8%20-%20%C5%9Eadan.mp4"},
            {n:"9. İrade", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E9%20-%20%C4%B0rade.mp4"},
            {n:"10. Geleceğin Habercisi", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E10.mp4"},
            {n:"11. Kenan Ticaret", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20SE11-%20KENAN%20T%C4%B0CARET.mp4"},
            {n:"12. Kuzgunlar 1", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/S5E12.mp4"},
            {n:"13. Kuzgunlar 2", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%205/Gibi%20S5E13.mp4"}
        ],
        6: [
            {n:"1. Waffle", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/1.mp4"},
            {n:"2. Mikrodalga", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/2.mp4"},
            {n:"3. Girls Night Out", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/3.mp4"},
            {n:"4. Metin", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/4.mp4"},
            {n:"5. Nomen est Omen", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/5.mp4"},
            {n:"6. Çağrı", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/6.mp4"},
            {n:"7. Gece Kaplanları", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/7.mp4"},
            {n:"8. Çöl Defnesi", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/8.mp4"},
            {n:"9. Jumbo", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/9.mp4"},
            {n:"10. İyilik Sağlık", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/10.mp4"},
            {n:"11. Başkaları", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/11.mp4"},
            {n:"12. Yapılanlar 1", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/12.mp4"},
            {n:"13. Yapılanlar 2", u:"https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%206/13.mp4"}
        ]
    };

    const vCont = document.getElementById("video-player-container"), vMain = document.getElementById("main-video"), loader = document.getElementById("loading-screen");
    const pUI = document.getElementById("player-ui"), pFill = document.getElementById("progress-fill"), imgPlay = document.getElementById("img-play");
    const curT = document.getElementById("cur-time"), durT = document.getElementById("dur-time"), popup = document.getElementById("exit-popup");
    const timeoutMsg = document.getElementById("timeout-message");
    let lastFocus, uiTimer, loadTimer;

    function formatTime(s) { if(!s) return "00:00"; let m=Math.floor(s/60), sec=Math.floor(s%60); return (m<10?"0"+m:m)+":"+(sec<10?"0"+sec:sec); }
    function showUI() { pUI.style.opacity=1; clearTimeout(uiTimer); uiTimer=setTimeout(()=>pUI.style.opacity=0, 4000); }
    
    function forceScroll(el) { el.scrollIntoView({ behavior:'smooth', block:'nearest', inline:'center'}); }

    function openPlayer(url) {
        vCont.style.display="flex"; loader.style.display="flex"; timeoutMsg.style.display="none";
        
        // ZAMANLAYICI BAŞLAT (4 SANİYE)
        clearTimeout(loadTimer);
        loadTimer = setTimeout(() => {
            if(loader.style.display !== "none") {
                timeoutMsg.style.display="block";
            }
        }, 4000);

        vMain.src=url; vMain.load(); vMain.play(); 
        document.getElementById("btn-play").focus();
        
        // HISTORY TRAP: URL'e sahte ekleme yap
        history.pushState({page: 'player'}, "Player", "#player");
    }

    function closePlayer() {
        vMain.pause(); vMain.src=""; vCont.style.display="none"; 
        clearTimeout(loadTimer); timeoutMsg.style.display="none";
        if(lastFocus) lastFocus.focus();
        
        // URL'de #player varsa temizle
        if(location.hash === "#player") {
            history.back(); 
        }
    }

    // TARAYICI GERİ GİTMEYE ÇALIŞIRSA (POPSTATE)
    window.addEventListener('popstate', function(event) {
        if (vCont.style.display === "flex") {
            // Player açıksa kapat, uygulamayı kapatma
            vMain.pause(); vMain.src=""; vCont.style.display="none"; 
            clearTimeout(loadTimer); timeoutMsg.style.display="none";
            if(lastFocus) lastFocus.focus();
        }
    });

    function loadSeason(sid) {
        const epList = document.getElementById("episode-list"); epList.innerHTML = "";
        allEpisodes[sid].forEach(ep => {
            const d = document.createElement("div"); d.className="episode-card"; d.tabIndex=0;
            d.innerHTML = `<div class="episode-name">${ep.n}</div>`;
            d.onfocus = () => forceScroll(d);
            d.onclick = () => { lastFocus=d; openPlayer(ep.u); };
            epList.appendChild(d);
        });
    }

    vMain.onplaying = () => { 
        loader.style.display="none"; timeoutMsg.style.display="none"; clearTimeout(loadTimer);
        imgPlay.src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/pause.png"; showUI(); 
    };
    vMain.onpause = () => imgPlay.src="https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/edmortv/play.png";
    vMain.ontimeupdate = () => { pFill.style.width = (vMain.currentTime/vMain.duration)*100+"%"; curT.innerText=formatTime(vMain.currentTime); durT.innerText=formatTime(vMain.duration); };

    document.getElementById("btn-play").onclick = () => vMain.paused ? vMain.play() : vMain.pause();
    document.getElementById("btn-rew").onclick = () => vMain.currentTime -= 10;
    document.getElementById("btn-fwd").onclick = () => vMain.currentTime += 10;
    document.getElementById("exit-no").onclick = () => { popup.style.display="none"; if(lastFocus) lastFocus.focus(); };
    document.getElementById("exit-yes").onclick = () => window.AndroidBridge ? window.AndroidBridge.closeApp() : window.close();

    const sBtns = document.querySelectorAll(".season-btn");
    sBtns.forEach(btn => {
        btn.onfocus = () => forceScroll(btn);
        btn.onclick = () => { sBtns.forEach(b=>b.classList.remove("active")); btn.classList.add("active"); loadSeason(btn.dataset.s); };
    });

    window.onload = () => { 
        loadSeason(1); sBtns[0].classList.add("active"); 
        setTimeout(()=>document.getElementById("login-sound").play().catch(e=>{}), 200); 
        setTimeout(()=>sBtns[0].focus(), 4600); 
        history.replaceState({page: 'home'}, "Home", " ");
    };

    window.addEventListener('keydown', (e) => {
        const isVideo = vCont.style.display === "flex";
        const isPopup = popup.style.display === "flex";
        const focused = document.activeElement;

        // PLAYER KONTROL (Geri tuşu buraya girmez, popstate halleder)
        if (isVideo) {
            showUI();
            if (e.keyCode === 13 && !focused.classList.contains("ctrl-btn")) vMain.paused ? vMain.play() : vMain.pause();
            
            if (!focused.classList.contains("ctrl-btn")) {
                if (e.keyCode === 37) vMain.currentTime -= 10;
                if (e.keyCode === 39) vMain.currentTime += 10;
            } else {
                if (e.keyCode === 37 && focused === document.getElementById("btn-play")) document.getElementById("btn-rew").focus();
                if (e.keyCode === 39 && focused === document.getElementById("btn-play")) document.getElementById("btn-fwd").focus();
                if (e.keyCode === 39 && focused === document.getElementById("btn-rew")) document.getElementById("btn-play").focus();
                if (e.keyCode === 37 && focused === document.getElementById("btn-fwd")) document.getElementById("btn-play").focus();
            }
            return;
        }

        // GERİ TUŞU -> POPUP ÇIKMADAN DİREKT KAPAT (POPUP İPTAL)
        // Ama video açıksa popstate çalışır, buraya düşmez. 
        // Buraya sadece video kapalıysa düşer.
        if (e.keyCode === 4 || e.keyCode === 8 || e.keyCode === 27 || e.keyCode === 10009) {
            if (isPopup) {
                // Popup varsa kapat
                popup.style.display="none"; 
                if(lastFocus) lastFocus.focus();
                e.preventDefault();
            } else {
                // Çıkış onayı olmadan direkt kapat (Sistem onayını kaldırdık)
                // Ama yine de yanlışlıkla çıkmasın diye kendi popupımızı kullanalım mı?
                // "Uygulamadan çıkmak için sistem onayını kaldıralım" dedin.
                // Eğer direkt kapanmasını istiyorsan alttaki satırı aç:
                // window.AndroidBridge ? window.AndroidBridge.closeApp() : window.close();
                
                // Yok eğer sadece "Sistemin kendi UI'ı gelmesin, benim siyah popup gelsin" diyorsan:
                lastFocus = focused;
                popup.style.display="flex";
                document.getElementById("exit-no").focus();
                e.preventDefault();
            }
        }

        if (isPopup) {
            if (e.keyCode === 37) document.getElementById("exit-yes").focus();
            if (e.keyCode === 39) document.getElementById("exit-no").focus();
            return;
        }

        // ANA EKRAN NAVİGASYON
        if (focused.classList.contains("season-btn")) {
            if (e.keyCode === 39) { e.preventDefault(); focused.nextElementSibling?.focus(); }
            if (e.keyCode === 37) { e.preventDefault(); focused.previousElementSibling?.focus(); }
            if (e.keyCode === 40) { e.preventDefault(); document.querySelector(".episode-card")?.focus(); }
        } else if (focused.classList.contains("episode-card")) {
            if (e.keyCode === 39) { e.preventDefault(); focused.nextElementSibling?.focus(); }
            if (e.keyCode === 37) { e.preventDefault(); focused.previousElementSibling?.focus(); }
            if (e.keyCode === 38) { e.preventDefault(); document.querySelector(".season-btn.active").focus(); }
        }
    });
</script>
</body>
</html>


