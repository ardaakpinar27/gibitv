<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GiBiTV - Android TV</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body {
            background: #000; color: #fff; font-family: 'Segoe UI', Arial, sans-serif;
            width: 100vw; height: 100vh; overflow: hidden; user-select: none;
            display: flex; flex-direction: column;
        }

        /* === CSS TABANLI SPLASH SCREEN (GiBiTV) === */
        #splash {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            /* JavaScript çalışmasa bile 4 saniye sonra burayı yok et */
            animation: forceHide 0.8s forwards;
            animation-delay: 4s; 
        }
        @keyframes forceHide {
            0% { opacity: 1; visibility: visible; }
            100% { opacity: 0; visibility: hidden; pointer-events: none; }
        }

        .splash-logo { display: flex; gap: 8px; }
        .splash-logo span {
            font-size: 100px; font-weight: 900; color: #222; opacity: 0.1;
            display: inline-block; animation: turnWhite 1.2s forwards;
        }
        @keyframes turnWhite { 
            0% { color: #222; opacity: 0.1; } 
            100% { color: #ffffff; opacity: 1; text-shadow: 0 0 25px rgba(255, 255, 255, 0.5); } 
        }
        /* Harf Gecikmeleri */
        .splash-logo span:nth-child(1) { animation-delay: 0.1s; } 
        .splash-logo span:nth-child(2) { animation-delay: 0.2s; } 
        .splash-logo span:nth-child(3) { animation-delay: 0.3s; } 
        .splash-logo span:nth-child(4) { animation-delay: 0.4s; } 
        .splash-logo span:nth-child(5) { animation-delay: 0.5s; } 
        .splash-logo span:nth-child(6) { animation-delay: 0.6s; }

        /* === ANA UYGULAMA === */
        #main-app { 
            display: flex; flex-direction: column; width: 100%; height: 100%; 
            opacity: 1; /* Desktop/Mobil fark etmeksizin görünür başlasın */
        }
        .hero {
            position: relative; flex: 1; width: 100%;
            background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/kapak.png") center center / cover no-repeat;
            display: flex; align-items: flex-end; padding-left: 60px; padding-bottom: 20px;
        }
        .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0) 30%, rgba(0,0,0,1) 100%); z-index: 1; }
        .cover-title { font-size: 80px; font-weight: bold; z-index: 5; text-shadow: 0 4px 20px rgba(0,0,0,1); }

        /* ... (Diğer stiller aynı kalıyor, boyutu küçültmek için özet geçiyorum) ... */
        .ui-footer { height: 380px; background: #000; display: flex; flex-direction: column; z-index: 10; }
        .seasons { display: flex; gap: 15px; padding: 10px 60px; }
        .season-btn { background: #1a1a1a; padding: 10px 25px; border-radius: 8px; font-size: 18px; color: #ccc; border: 3px solid transparent; transition: 0.2s; cursor: pointer; }
        .season-btn:focus { color: #fff !important; border-color: #f1c40f; transform: scale(1.05); }
        .season-btn.active { color: #f1c40f; border-bottom: 3px solid #f1c40f; }
        .episodes { display: flex; gap: 20px; padding: 20px 60px; overflow-x: auto; scroll-behavior: smooth; scrollbar-width: none; }
        .episode-card { min-width: 260px; height: 150px; border-radius: 12px; position: relative; overflow: hidden; display: flex; align-items: flex-end; flex-shrink: 0; transition: 0.2s; background: url("https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/Posterler/gibitvcover.png") center center / cover no-repeat; }
        .episode-card span { position: relative; z-index: 2; padding: 15px; font-size: 15px; font-weight: 500; color: #fff; }
        .episode-card:focus { box-shadow: inset 0 0 0 5px #f1c40f; transform: scale(1.1); z-index: 20; }
        #video-player-container { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; justify-content: center; align-items: center; }
        #loading-screen { position: absolute; inset: 0; background: #000; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 10001; }
        .spinner { width: 70px; height: 70px; border: 6px solid rgba(255, 255, 255, 0.1); border-top: 6px solid #f1c40f; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #error-popup { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 20000; display: none; justify-content: center; align-items: center; }
        .popup-content { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 2px solid #e50914; max-width: 500px; text-align: center; }
        #close-popup-btn { background: transparent; color: #fff; border: 2px solid #e50914; padding: 12px 40px; border-radius: 8px; font-size: 18px; margin-top: 20px; }
        #close-popup-btn:focus { background: #e50914; border-color: #f1c40f; }
        video { width: 100%; height: 100%; background: #000; }
    </style>
</head>
<body>
    <div id="splash">
        <div class="splash-logo">
            <span>G</span><span>i</span><span>B</span><span>i</span><span>T</span><span>V</span>
        </div>
    </div>

    <div id="error-popup">
        <div class="popup-content">
            <h2 style="color:#e50914">UYARI</h2>
            <p>Bu sezonda teknik bir problem yaşanıyor. Daha sonra tekrar deneyin.</p>
            <button id="close-popup-btn">Tamam</button>
        </div>
    </div>

    <div id="video-player-container">
        <div id="loading-screen"><div class="spinner"></div></div>
        <video id="main-video"></video>
    </div>

    <div id="main-app">
        <div class="hero"><div class="cover-title">Gibi</div></div>
        <div class="ui-footer">
            <div class="seasons">
                <div class="season-btn" tabindex="1" data-season="1">Sezon 1</div>
                <div class="season-btn" tabindex="2" data-season="2">Sezon 2</div>
                <div class="season-btn" tabindex="3" data-season="3">Sezon 3</div>
                <div class="season-btn" tabindex="4" data-season="4">Sezon 4</div>
                <div class="season-btn" tabindex="5" data-season="5">Sezon 5</div>
                <div class="season-btn" tabindex="6" data-season="6">Sezon 6</div>
            </div>
            <div id="episodes" class="episodes"></div>
        </div>
    </div>

<script>
    const episodeData = {
        1: [
            { name: "Kokariç", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/1%20-%20Kokari%C3%A7.mp4" },
            { name: "Vatka", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/2%20-%20Vatka.mp4" },
            { name: "Nü Model", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/3%20-%20N%C3%BC%20Model.mp4" },
            { name: "Erasmus'la Gelen Yamyam", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/4%20-%20Erasmuslu%20Yamyam.mp4" },
            { name: "Yanlış Mentor", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/5.mp4" },
            { name: "Karanlık Güç", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/6%20-%20Karanl%C4%B1k%20G%C3%BC%C3%A7.mp4" },
            { name: "İkinci Yol", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/7.mp4" },
            { name: "Badana", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/8%20-%20Badana.mp4" },
            { name: "Ayırtma Yenilemesi", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/9%20-%20Ay%C4%B1rtma%20Yenilemesi.mp4" },
            { name: "Kan Parası", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/10%20-%20Kan%20Paras%C4%B1.mp4" },
            { name: "Yılmaz Bey Banyo", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/11%20-%20Y%C4%B1lmaz%20Bey%20Banyo.mp4" },
            { name: "Atın Bulunuşu", url: "https://filedn.eu/liPnBWWQgeQVeGgdPoPnl8S/G%C4%B0B%C4%B0%20SEZON%201/12%20-%20At%C4%B1n%20Bulunu%C5%9Fu.mp4" }
        ],
        2: [], 3: [], 4: [], 5: [], 6: []
    };

    const episodesEl = document.getElementById("episodes");
    const seasonButtons = document.querySelectorAll(".season-btn");
    const videoContainer = document.getElementById("video-player-container");
    const mainVideo = document.getElementById("main-video");
    const loadingScreen = document.getElementById("loading-screen");
    const errorPopup = document.getElementById("error-popup");
    const closePopupBtn = document.getElementById("close-popup-btn");
    let lastFocusedElement = null;

    // OTOMATİK ODAKLANMA (Açılışta sezonları yükler)
    window.addEventListener('load', () => {
        loadSeason(1);
        seasonButtons[0].classList.add("active");
        setTimeout(() => { seasonButtons[0].focus(); }, 4200);
    });

    function playVideo(url) {
        if(!url) return;
        lastFocusedElement = document.activeElement;
        videoContainer.style.display = "flex";
        loadingScreen.style.display = "flex"; 
        mainVideo.src = url;
        mainVideo.load();
        mainVideo.onplaying = () => { loadingScreen.style.display = "none"; };
        mainVideo.oncanplay = () => { mainVideo.play(); };
    }

    function showError() {
        lastFocusedElement = document.activeElement;
        errorPopup.style.display = "flex";
        closePopupBtn.focus();
    }

    closePopupBtn.onclick = () => {
        errorPopup.style.display = "none";
        if(lastFocusedElement) lastFocusedElement.focus();
    };

    document.addEventListener('keydown', (e) => {
        if (errorPopup.style.display === "flex") {
            if (e.keyCode === 13) closePopupBtn.onclick();
            e.preventDefault(); return;
        }
        if (videoContainer.style.display === "flex") {
            switch (e.keyCode) {
                case 37: mainVideo.currentTime -= 10; e.preventDefault(); break;
                case 39: mainVideo.currentTime += 10; e.preventDefault(); break;
                case 13: mainVideo.paused ? mainVideo.play() : mainVideo.pause(); e.preventDefault(); break;
                case 8: case 27:
                    mainVideo.pause(); mainVideo.src = "";
                    videoContainer.style.display = "none";
                    if(lastFocusedElement) lastFocusedElement.focus();
                    e.preventDefault(); break;
            }
        } else {
            const focused = document.activeElement;
            if (focused && focused.classList.contains('season-btn') && e.keyCode === 40) {
                const firstEp = document.querySelector('.episode-card');
                if(firstEp) firstEp.focus();
                e.preventDefault();
            } else if (focused && focused.classList.contains('episode-card') && e.keyCode === 38) {
                document.querySelector('.season-btn.active').focus();
                e.preventDefault();
            }
        }
    });

    function loadSeason(season) {
        episodesEl.innerHTML = "";
        if (season == "2") { showError(); return; }
        (episodeData[season] || []).forEach(ep => {
            const div = document.createElement("div");
            div.className = "episode-card"; div.tabIndex = 0;
            div.innerHTML = `<span>${ep.name}</span>`;
            div.onclick = () => playVideo(ep.url);
            div.onfocus = () => div.scrollIntoView({ behavior: 'smooth', inline: 'center' });
            episodesEl.appendChild(div);
        });
    }

    seasonButtons.forEach(btn => {
        btn.onclick = () => {
            if (btn.dataset.season == "2") { showError(); return; }
            seasonButtons.forEach(b => b.classList.remove("active"));
            btn.classList.add("active"); loadSeason(btn.dataset.season);
        };
    });
</script>
</body>
</html>
